# Derivatives (Perps / Options) Schema

This is the OpenBlock Labs standard schema for derivatives protocols (options and perps).

## Schema

### Pools

**Description:** Pools in the protocol (one entry for each token).

| Property            | Description                                        | Type   |
|---------------------|----------------------------------------------------|--------|
| chain_id            | Standard chain id.                                 | number |
| creation_timestamp  | The timestamp of the block the pool was created on.| number |
| creation_block_number | The block number this pool was created on.       | number |
| pool_address        | The contract address of the pool.                  | string |
| token_index         | The index of the token in the smart contract (one row for each token in a pool). | number |
| token_address       | The contract address of the token.                 | string |
| token_symbol        | The symbol of the token.                           | string |
| fee_rate            | The fee rate of the pool, as a percentage.         | number |

### LP Snapshot

**Description:** Liquidity providers snapshot (one entry for each token in a pool).

| Property          | Description                                           | Type   |
|-------------------|-------------------------------------------------------|--------|
| timestamp         | The timestamp of the snapshot.                        | number |
| chain_id          | Standard chain id.                                    | number |
| pool_address      | The address of the pool.                              | string |
| lp_address        | The address of the liquidity provider.                | string |
| token_index       | The index of the token in the smart contract.         | number |
| token_address     | The address of the token provided as liquidity.       | string |
| token_symbol      | The symbol of the token.                              | string |
| token_amount      | The amount of tokens, decimal normalized.             | number |
| token_amount_usd  | (Optional) The amount of the provided token in USD.   | number |
| fees_usd          | (Optional) The revenue / fees generated by the LP in the given snapshot in USD. | number |

### Pool Snapshot

| Property                | Description                                                           | Type   |
|-------------------------|-----------------------------------------------------------------------|--------|
| timestamp               | The timestamp of the snapshot.                                        | number |
| chain_id                | Standard chain id.                                                    | number |
| pool_address            | The smart contract address of the pool.                               | string |
| tvl_usd                 | The total value locked in USD.                                        | number |
| open_interest_longs_usd | The open interest of longs in USD.                                    | number |
| open_interest_shorts_usd| The open interest of shorts in USD.                                   | number |
| volume_usd              | The volume in USD during this given snapshot period.                  | number |
| fees_usd                | The revenue / fees collected in this pool in USD in the given snapshot period. | number |
| incentive_amount        | The amount of incentives given out during this snapshot.              | number |
| incentive_usd           | The value of incentives in USD.                                       | number |
| put_maturity_timestamp  | The maturity date for the put option as a timestamp, options protocols only. | number |
| call_maturity_timestamp | The maturity date for the call option as a timestamp, options protocols only. | number |

### Protocol Snapshot

| Property                | Description                                             | Type   |
|-------------------------|---------------------------------------------------------|--------|
| timestamp               | The timestamp of the snapshot.                          | number |
| chain_id                | Standard chain id.                                      | number |
| tvl_usd                 | The total value locked in USD.                          | number |
| open_interest_longs_usd | The sum of open interest of longs in USD in the protocol. | number |
| open_interest_shorts_usd| The sum of open interest of shorts in USD.              | number |
| volume_usd              | The volume in USD, during the given snapshot period.    | number |
| fees_usd                | The total revenue / fees in USD.                        | number |
| funding_rate            | The funding rate as a percentage (ie, 2.3% as 2.3).     | number |

### Trades

| Property            | Description                                         | Type   |
|---------------------|-----------------------------------------------------|--------|
| timestamp           | The timestamp of the trade.                         | number |
| chain_id            | Standard chain id.                                  | number |
| transaction_hash    | The hash of the transaction this trade was performed in. | string |
| block_number        | The block number of the trade.                      | number |
| pool_address        | The address of the pool this token was traded in.   | string |
| maker_address       | The address of the maker.                           | string |
| taker_address       | The address of the taker.                           | string |
| token_address       | The address of the token.                           | string |
| amount              | The amount of the token traded, decimal normalized. | number |
| amount_usd          | The trade amount in USD.                            | number |
| pnl_usd             | The total profit and loss of the trade in USD.      | number |
