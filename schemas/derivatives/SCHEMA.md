# Derivatives (Perps / Options) Schema

This is the OpenBlock Labs standard schema for derivatives protocols (options and perps).

## Schema

### Pools

**Description:** Pools in the protocol (one entry for each token).

| Property            | Description                                      | Type   |
|---------------------|--------------------------------------------------|--------|
| protocolName        | The name of the protocol.                        | string |
| chainId             | Standard chain id.                               | number |
| creationTimestamp   | The timestamp of the block the pool was created on. | number |
| creationBlockNumber | The block number this pool was created on.       | number |
| poolAddress         | The contract address of the pool.                | string |
| tokenIndex          | The index of the token in the smart contract.    | number |
| tokenAddress        | The contract address of the token.               | string |
| tokenSymbol         | The symbol of the token.                         | string |
| feeRate             | The fee rate of the pool.                        | number |

### LP Snapshot

**Description:** Liquidity providers snapshot (one entry for each token in a pool).

| Property       | Description                                         | Type   |
|----------------|-----------------------------------------------------|--------|
| timestamp      | The timestamp of the snapshot.                      | number |
| protocolName   | The name of the protocol.                           | string |
| chainId        | Standard chain id.                                  | number |
| poolAddress    | The address of the pool.                            | string |
| lpAddress      | The address of the liquidity provider.              | string |
| tokenIndex     | The index of the token in the smart contract.       | number |
| tokenAddress   | The address of the token provided as liquidity.     | string |
| tokenSymbol    | The symbol of the token.                            | string |
| tokenAmount    | The amount of tokens, decimal normalized.           | number |
| tokenAmountUsd | The amount of the provided token in USD.            | number |
| feesUsd        | The revenue / fees generated by the LP in the given snapshot in USD. | number |

### Pool Snapshot

**Description:** Pool level snapshot data.

| Property                | Description                                                           | Type   |
|-------------------------|-----------------------------------------------------------------------|--------|
| timestamp               | The timestamp of the snapshot.                                        | number |
| protocolName            | The name of the protocol.                                             | string |
| chainId                 | Standard chain id.                                                    | number |
| poolAddress             | The smart contract address of the pool.                               | string |
| tvlUsd                  | The total value locked in USD.                                        | number |
| openInterestLongsUsd    | The open interest of longs in USD.                                    | number |
| openInterestShortsUsd   | The open interest of shorts in USD.                                   | number |
| volumeUsd               | The volume in USD during this given snapshot period.                  | number |
| feesUsd                 | The revenue / fees collected in this pool in USD in the given snapshot period. | number |
| incentiveAmount         | The amount of incentives given out during this snapshot.              | number |
| incentiveUsd            | The value of incentives in USD.                                       | number |
| putMaturityTimestamp    | The maturity date for the put option as a timestamp, options protocols only. | number |
| callMaturityTimestamp   | The maturity date for the call option as a timestamp, options protocols only. | number |

### Protocol Snapshot

**Description:** Protocol level snapshot.

| Property                | Description                                             | Type   |
|-------------------------|---------------------------------------------------------|--------|
| timestamp               | The timestamp of the snapshot.                          | number |
| protocolName            | The name of the protocol.                               | string |
| chainId                 | Standard chain id.                                      | number |
| tvlUsd                  | The total value locked in USD.                          | number |
| openInterestLongsUsd    | The sum of open interest of longs in USD in the protocol. | number |
| openInterestShortsUsd   | The sum of open interest of shorts in USD.              | number |
| volumeUsd               | The volume in USD, during the given snapshot period.    | number |
| feesUsd                 | The total revenue / fees in USD.                        | number |
| fundingRate             | The funding rate as a percentage (ie, 2.3% as 2.3).     | number |

### Trades

**Description:** List of trades in the protocol.

| Property            | Description                                         | Type   |
|---------------------|-----------------------------------------------------|--------|
| timestamp           | The timestamp of the trade.                         | number |
| protocolName        | The name of the protocol.                           | string |
| chainId             | Standard chain id.                                  | number |
| transactionHash     | The hash of the transaction this trade was performed in. | string |
| blockNumber         | The block number of the trade.                      | number |
| poolAddress         | The address of the pool this token was traded in.   | string |
| makerAddress        | The address of the maker.                           | string |
| takerAddress        | The address of the taker.                           | string |
| tokenAddress        | The address of the token.                           | string |
| tradeAmount         | The amount of the token traded, decimal normalized. | number |
| tradeAmountUsd      | The trade amount in USD.                            | number |
| pnlUsd              | The total profit and loss of the trade in USD.      | number |
