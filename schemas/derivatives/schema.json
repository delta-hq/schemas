{
  "schema": "Derivatives",
  "description": "OpenBlock Labs standard schema for derivatives protocols (options and perps).",
  "version": "1.0.0-alpha",
  "tables": [
    {
      "label": "Pools",
      "table_name": "derivatives_pools",
      "aggregation": "none",
      "description": "Pools in the protocol (one entry for each token).",
      "properties": {
        "chain_id": {
          "description": "Standard chain id.",
          "type": "number"
        },
        "creation_timestamp": {
          "description": "The timestamp of the block the pool was created on.",
          "type": "number"
        },
        "creation_block_number": {
          "description": "The block number this pool was created on.",
          "type": "number"
        },
        "pool_address": {
          "description": "The contract address of the pool.",
          "type": "string"
        },
        "token_index": {
          "description": "The index of the token in the smart contract (one row for each token in a pool).",
          "type": "number"
        },
        "token_address": {
          "description": "The contract address of the token.",
          "type": "string"
        },
        "token_symbol": {
          "description": "The symbol of the token.",
          "type": "string"
        },
        "fee_rate": {
          "description": "The fee rate of the pool, as a percentage.",
          "type": "number"
        }
      }
    },
    {
      "label": "LP Snapshot",
      "table_name": "lp_snapshot",
      "aggregation": "none",
      "description": "Liquidity providers snapshot (one entry for each token in a pool).",
      "properties": {
        "timestamp": {
          "description": "The timestamp of the snapshot.",
          "type": "number"
        },
        "chain_id": {
          "description": "Standard chain id.",
          "type": "number"
        },
        "pool_address": {
          "description": "The address of the pool.",
          "type": "string"
        },
        "lp_address": {
          "description": "The address of the liquidity provider.",
          "type": "string"
        },
        "token_index": {
          "description": "The index of the token in the smart contract.",
          "type": "number"
        },
        "token_address": {
          "description": "The address of the token provided as liquidity.",
          "type": "string"
        },
        "token_symbol": {
          "description": "The symbol of the token.",
          "type": "string"
        },
        "token_amount": {
          "description": "The amount of tokens, decimal normalized.",
          "type": "number"
        },
        "token_amount_usd": {
          "description": "(Optional) The amount of the provided token in USD.",
          "type": "number"
        },
        "fees_usd": {
          "description": "(Optional) The revenue / fees generated by the LP in the given snapshot in USD.",
          "type": "number"
        }
      }
    },
    {
      "label": "Pool Snapshot",
      "table_name": "pool_snapshot",
      "aggregation": "none",
      "properties": {
        "timestamp": {
          "description": "The timestamp of the snapshot.",
          "type": "number"
        },
        "chain_id": {
          "description": "Standard chain id.",
          "type": "number"
        },
        "pool_address": {
          "description": "The smart contract address of the pool.",
          "type": "string"
        },
        "tvl_usd": {
          "description": "The total value locked in USD.",
          "type": "number"
        },
        "open_interest_longs_usd": {
          "description": "The open interest of longs in USD.",
          "type": "number"
        },
        "open_interest_shorts_usd": {
          "description": "The open interest of shorts in USD.",
          "type": "number"
        },
        "volume_usd": {
          "description": "The volume in USD during this given snapshot period.",
          "type": "number"
        },
        "fees_usd": {
          "description": "The revenue / fees collected in this pool in USD in the given snapshot period.",
          "type": "number"
        },
        "incentive_amount": {
          "description": "The amount of incentives given out during this snapshot.",
          "type": "number"
        },
        "incentive_usd": {
          "description": "The value of incentives in USD.",
          "type": "number"
        },
        "put_maturity_timestamp": {
          "description": "The maturity date for the put option as a timestamp, options protocols only.",
          "type": "number"
        },
        "call_maturity_timestamp": {
          "description": "The maturity date for the call option as a timestamp, options protocols only.",
          "type": "number"
        }
      }
    },
    {
      "label": "Protocol Snapshot",
      "table_name": "protocol_snapshot",
      "aggregation": "none",
      "properties": {
        "timestamp": {
          "description": "The timestamp of the snapshot.",
          "type": "number"
        },
        "chain_id": {
          "description": "Standard chain id.",
          "type": "number"
        },
        "tvl_usd": {
          "description": "The total value locked in USD.",
          "type": "number"
        },
        "open_interest_longs_usd": {
          "description": "The sum of open interest of longs in USD in the protocol.",
          "type": "number"
        },
        "open_interest_shorts_usd": {
          "description": "The sum of open interest of shorts in USD.",
          "type": "number"
        },
        "volume_usd": {
          "description": "The volume in USD, during the given snapshot period.",
          "type": "number"
        },
        "fees_usd": {
          "description": "The total revenue / fees in USD.",
          "type": "number"
        },
        "funding_rate": {
          "description": "The funding rate as a percentage (ie, 2.3% as 2.3).",
          "type": "number"
        }
      }
    },
    {
      "label": "Trades",
      "table_name": "trades",
      "aggregation": "none",
      "properties": {
        "timestamp": {
          "description": "The timestamp of the trade.",
          "type": "number"
        },
        "chain_id": {
          "description": "Standard chain id.",
          "type": "number"
        },
        "transaction_hash": {
          "description": "The hash of the transaction this trade was performed in.",
          "type": "string"
        },
        "block_number": {
          "description": "The block number of the trade.",
          "type": "number"
        },
        "pool_address": {
          "description": "The address of the pool this token was traded in.",
          "type": "string"
        },
        "maker_address": {
          "description": "The address of the maker.",
          "type": "string"
        },
        "taker_address": {
          "description": "The address of the taker.",
          "type": "string"
        },
        "token_address": {
          "description": "The address of the token.",
          "type": "string"
        },
        "amount": {
          "description": "The amount of the token traded, decimal normalized.",
          "type": "number"
        },
        "amount_usd": {
          "description": "The trade amount in USD.",
          "type": "number"
        },
        "pnl_usd": {
          "description": "The total profit and loss of the trade in USD.",
          "type": "number"
        }
      }
    }
  ]
}
