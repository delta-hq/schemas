{
  "schema": "Yield Aggregator (Leverage, Gambling, RWA, ALM, Liquidity/LP, index)",
  "description": "Standard table definitions for yield aggregator protocols (can include, Leverage, Gambling, RWA, ALM, Liquidity/LP, index).",
  "protocolCategory": ["Automated Liquidity Manager", "Gambling", "Index", "Leverage", "Prediction Market", "RWA", "Yield", "Yield Aggregator"],
  "version": "1.0.0-alpha",
  "tables": [
    {
      "label": "Pools",
      "tableName": "misc_pools",
      "aggregation": "none",
      "uniqueKey": ["pool_address"],
      "description": "List of pools in the protocol.",
      "properties": {
        "chain_id": {
          "description": "The standard chain id.",
          "type": "number"
        },
        "creation_timestamp": {
          "description": "The timestamp this pool was created.",
          "type": "number"
        },
        "creation_block_number": {
          "description": "The block number that this pool was created.",
          "type": "number"
        },
        "underlying_token_address": {
          "description": "The contract address of the underlying token or deposited token.",
          "type": "string"
        },
        "underlying_token_index": {
          "description": "The index of the underlying token in the smart contract, default 0.",
          "type": "number"
        },
        "underlying_token_symbol": {
          "description": "The symbol of the underlying token token.",
          "type": "string"
        },
        "underlying_token_decimals": {
          "description": "The decimal amount of the underlying token.",
          "type": "number"
        },
        "receipt_token_address": {
          "description": "The contract address of the output or receipt token of this pool, if available.",
          "type": "string"
        },
        "receipt_token_symbol": {
          "description": "The symbol of the receipt token.",
          "type": "string"
        },
        "receipt_token_decimals": {
          "description": "The symbol decimal amount for the receipt token.",
          "type": "number"
        },
        "pool_address": {
          "description": "The smart contract address of the pool.",
          "type": "string"
        },
        "pool_symbol": {
          "description": "The symbol of the pool.",
          "type": "string"
        }
      }
    },
    {
      "label": "Position Snapshot",
      "tableName": "misc_depositors",
      "aggregation": "daily",
      "uniqueKey": ["user_address", "pool_address", "block_date"],
      "description": "Snapshot of the pool users.",
      "properties": {
        "timestamp": {
          "description": "The timestamp of the snapshot.",
          "type": "number"
        },
        "block_date": {
          "description": "The timestamp truncated (ie, 2023-03-04 in YYYY-MM-DD format).",
          "type": "date"
        },
        "chain_id": {
          "description": "The standard chain id.",
          "type": "number"
        },
        "pool_address": {
          "description": "The address of the pool this user has a position in.",
          "type": "string"
        },
        "user_address": {
          "description": "The address of the user who has a position in the pool.",
          "type": "string"
        },
        "underlying_token_address": {
          "description": "The address of the supplied underlying token.",
          "type": "string"
        },
        "underlying_token_index": {
          "description": "The index in the smart contract of this underlying token, default 0.",
          "type": "number"
        },
        "underlying_token_amount": {
          "description": "The amount of the underlying token that the user deposited, decimal normalized.",
          "type": "number"
        },
        "underlying_token_amount_usd": {
          "description": "The amount of underlying tokens supplied, in USD.",
          "type": "number"
        },
        "total_fees_usd": {
          "description": "The total amount of revenue and fees paid in this pool in the given snapshot, in USD.",
          "type": "number"
        }
      }
    },
    {
      "label": "Pool Snapshot",
      "tableName": "misc_pool_metrics",
      "aggregation": "daily",
      "uniqueKey": ["pool_address", "block_date"],
      "description": "TVL, fees, and incentives data at the pool level.",
      "properties": {
        "timestamp": {
          "description": "The timestamp of the snapshot.",
          "type": "number"
        },
        "block_date": {
          "description": "The timestamp truncated (ie, 2023-03-04 in YYYY-MM-DD format).",
          "type": "date"
        },
        "chain_id": {
          "description": "The standard chain id.",
          "type": "number"
        },
        "underlying_token_address": {
          "description": "The contract address of the underlying token or deposited token.",
          "type": "string"
        },
        "underlying_token_index": {
          "description": "The index of the underlying token in the smart contract, default 0.",
          "type": "number"
        },
        "pool_address": {
          "description": "The address of the pool.",
          "type": "string"
        },
        "underlying_token_amount": {
          "description": "The amount of underlying token supplied in this pool, decimal normalized.",
          "type": "number"
        },
        "underlying_token_amount_usd": {
          "description": "The amount of underlying tokens supplied in this pool, in USD.",
          "type": "number"
        },
        "total_fees_usd": {
          "description": "The total amount of revenue and fees paid in this pool in the given snapshot, in USD.",
          "type": "number"
        }
      }
    }
  ]
}
