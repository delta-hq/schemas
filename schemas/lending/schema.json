{
    "schema": "Lending / MM / CDP",
    "description": "Standard table definitions for lending protocols.",
    "version": "1.0.0",
    "tables": [
        {
            "label": "Pools",
            "tableName": "lending_pools",
            "aggregation": "none",
            "description": "List of lending pools in this protocol.",
            "properties": {
                "protocol_name": {
                    "description": "The name of the protocol this table belongs to.",
                    "type": "string"
                },
                "chain_id": {
                    "description": "The standard id of the chain.",
                    "type": "number"
                },
                "creation_block_number": {
                    "description": "The block this pool was created in.",
                    "type": "number"
                },
                "creation_timestamp": {
                    "description": "The timestamp of the block that this pool was created in.",
                    "type": "number"
                },
                "underlying_token_address": {
                    "description": "The contract address of the underlying token.",
                    "type": "string"
                },
                "underlying_token_symbol": {
                    "description": "The symbol of the underlying token.",
                    "type": "string"
                },
                "receipt_token_address": {
                    "description": "The contract address of the receipt token.",
                    "type": "string"
                },
                "receipt_token_symbol": {
                    "description": "The symbol of the receipt token.",
                    "type": "string"
                },
                "pool_address": {
                    "description": "The contract address of the pool.",
                    "type": "string"
                },
                "pool_type": {
                    "description": "The type of the pool (collateral_only, isolated, supply_pool, cdp).",
                    "type": "string"
                }
            }
        },
        {
            "label": "Position Snapshot",
            "tableName": "lending_suppliers",
            "aggregation": "daily",
            "description": "Snapshot of user positions in the lending protocol.",
            "properties": {
                "timestamp": {
                    "description": "The timestamp of the snapshot.",
                    "type": "string"
                },
                "protocol_name": {
                    "description": "The name of the protocol this table belongs to.",
                    "type": "string"
                },
                "chain_id": {
                    "description": "The standard id of the chain.",
                    "type": "number"
                },
                "pool_address": {
                    "description": "The contract address of the pool.",
                    "type": "string"
                },
                "underlying_token_address": {
                    "description": "The contract address of the underlying token.",
                    "type": "string"
                },
                "underlying_token_symbol": {
                    "description": "The symbol of the underlying token.",
                    "type": "string"
                },
                "user_address": {
                    "description": "The address of the user who has the position.",
                    "type": "string"
                },
                "supplied_amount": {
                    "description": "The amount supplied by the user in native terms, normalized by underlying decimals.",
                    "type": "number"
                },
                "supplied_amount_usd": {
                    "description": "(Optional) The supplied amount in USD.",
                    "type": "number"
                },
                "borrowed_amount": {
                    "description": "The amount borrowed by the user normalized to native terms, using underlying decimals.",
                    "type": "number"
                },
                "borrowed_amount_usd": {
                    "description": "(Optional) The borrowed amount in USD.",
                    "type": "number"
                },
                "collateral_amount": {
                    "description": "(Optional) The amount of collateral-only tokens of this asset, normalized.",
                    "type": "number"
                },
                "collateral_amount_usd": {
                    "description": "(Optional) The amount of collateral-only tokens in USD.",
                    "type": "number"
                }
            }
        },
        {
            "label": "Pool Snapshot",
            "tableName": "lending_pool_metrics",
            "aggregation": "daily",
            "description": "Pool level snapshots.",
            "properties": {
                "timestamp": {
                    "description": "The timestamp of the snapshot.",
                    "type": "string"
                },
                "protocol_name": {
                    "description": "The name of the protocol this table belongs to.",
                    "type": "string"
                },
                "chain_id": {
                    "description": "The standard id of the chain.",
                    "type": "number"
                },
                "pool_address": {
                    "description": "The contract address of the pool.",
                    "type": "string"
                },
                "underlying_token_address": {
                    "description": "The contract address of the underlying token.",
                    "type": "string"
                },
                "underlying_token_symbol": {
                    "description": "The symbol of the underlying token.",
                    "type": "string"
                },
                "underlying_token_price_usd": {
                    "description": "(Optional) The token price of the underlying asset in USD.",
                    "type": "number"
                },
                "available_amount": {
                    "description": "The amount of token's available to borrow (liquidity or net supply or supply - borrow).",
                    "type": "number"
                },
                "available_amount_usd": {
                    "description": "The available amount of token's in this pool in USD.",
                    "type": "number"
                },
                "supplied_amount": {
                    "description": "The total amount of the underlying token supplied in this pool normalized.",
                    "type": "number"
                },
                "supplied_amount_usd": {
                    "description": "The supplied amount in USD.",
                    "type": "number"
                },
                "non_recursive_supplied_amount": {
                    "description": "(Optional) The amount of non recursive supply in this pool, in the underlying token, decimal normalized. This is an aggregation of all of the user's net supply of this asset.",
                    "type": "number"
                },
                "collateral_amount": {
                    "description": "(Optional) The amount of collateral only tokens in this pool.",
                    "type": "number"
                },
                "collateral_amount_usd": {
                    "description": "(Optional) The amount of collateral only tokens in the pool.",
                    "type": "number"
                },
                "collateral_factor": {
                    "description": "The collateral factor of the pool (defined as a percentage, between 0-100).",
                    "type": "number"
                },
                "supply_index": {
                    "description": "The supply index of the pool.",
                    "type": "number"
                },
                "supply_apr": {
                    "description": "The current annual percentage rate for supplied amount.",
                    "type": "number"
                },
                "borrowed_amount": {
                    "description": "The amount of underlying tokens borrowed from this pool, normalized to the underlying token.",
                    "type": "number"
                },
                "borrowed_amount_usd": {
                    "description": "The borrowed amount in USD.",
                    "type": "number"
                },
                "borrow_index": {
                    "description": "The borrow index of the pool.",
                    "type": "number"
                },
                "borrow_apr": {
                    "description": "The annual percentage rate for borrow.",
                    "type": "number"
                },
                "fees_usd": {
                    "description": "(Optional) The total revenue / fees accrued in this pool during the given snapshot period.",
                    "type": "number"
                }
            }
        }
    ]
}
