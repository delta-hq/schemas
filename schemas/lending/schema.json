{
    "schema": "lending",
    "description": "Standard table definitions for lending protocols.",
    "version": "1.0.0-alpha",
    "tables": [
        {
            "tableName": "pools",
            "description": "List of lending pools in this protocol.",
            "properties": {
                "protocolName": {
                    "description": "The name of the protocol this table belongs to.",
                    "type": "string"
                },
                "chainId": {
                    "description": "The standard id of the chain.",
                    "type": "number"
                },
                "creationBlock": {
                    "description": "The block this pool was created in.",
                    "type": "number"
                },
                "creationTimestamp": {
                    "description": "The timestamp of the block that this pool was created in.",
                    "type": "number"
                },
                "underlyingTokenAddress": {
                    "description": "The contract address of the underlying token.",
                    "type": "string"
                },
                "underlyingTokenSymbol": {
                    "description": "The symbol of the underlying token.",
                    "type": "string"
                },
                "receiptTokenAddress": {
                    "description": "The contract address of the receipt token.",
                    "type": "string"
                },
                "receiptTokenSymbol": {
                    "description": "The symbol of the receipt token.",
                    "type": "string"
                },
                "poolAddress": {
                    "description": "The contract address of the pool.",
                    "type": "string"
                },
                "poolType": {
                    "description": "The type of the pool (ie, collateral_only, isolated, supply_pool, cdp).",
                    "type": "string"
                }
            }
        },
        {
            "tableName": "positionSnapshot",
            "description": "Snapshot of user positions in the lending protocol.",
            "properties": {
                "timestamp": {
                    "description": "The timestamp of the record.",
                    "type": "string"
                },
                "protocolName": {
                    "description": "The name of the protocol this table belongs to.",
                    "type": "string"
                },
                "chainId": {
                    "description": "The standard id of the chain.",
                    "type": "number"
                },
                "poolAddress": {
                    "description": "The contract address of the pool.",
                    "type": "string"
                },
                "underlyingTokenAddress": {
                    "description": "The contract address of the underlying token.",
                    "type": "string"
                },
                "underlyingTokenSymbol": {
                    "description": "The symbol of the underlying token.",
                    "type": "string"
                },
                "userAddress": {
                    "description": "The address of the user.",
                    "type": "string"
                },
                "suppliedAmount": {
                    "description": "The amount supplied by the user in native terms, normalized by underlying decimals.",
                    "type": "number"
                },
                "suppliedUsd": {
                    "description": "The supplied amount in USD.",
                    "type": "number"
                },
                "borrowedAmount": {
                    "description": "The amount borrowed by the user normalized to native terms, using underlying decimals.",
                    "type": "number"
                },
                "borrowedUsd": {
                    "description": "The borrowed amount in USD.",
                    "type": "number"
                },
                "collateralAmount": {
                    "description": "(Optional) The amount of collateral-only tokens of this asset, normalized.",
                    "type": "number"
                },
                "collateralUsd": {
                    "description": "(Optional) The amount of collateral-only tokens in USD.",
                    "type": "number"
                }
            }
        },
        {
            "tableName": "poolSnapshot",
            "description": "Pool level snapshots.",
            "properties": {
                "timestamp": {
                    "description": "The timestamp of the snapshot.",
                    "type": "string"
                },
                "protocolName": {
                    "description": "The name of the protocol this table belongs to.",
                    "type": "string"
                },
                "chainId": {
                    "description": "The standard id of the chain.",
                    "type": "number"
                },
                "poolAddress": {
                    "description": "The contract address of the pool.",
                    "type": "string"
                },
                "underlyingTokenAddress": {
                    "description": "The contract address of the underlying token.",
                    "type": "string"
                },
                "underlyingTokenSymbol": {
                    "description": "The symbol of the underlying token.",
                    "type": "string"
                },
                "availableAmount": {
                    "description": "The amount of token's available to borrow (ie, liquidity or net supply or supply - borrow).",
                    "type": "number"
                },
                "availableTvlUsd": {
                    "description": "The available amount of token's in this pool in USD.",
                    "type": "number"
                },
                "totalSuppliedAmount": {
                    "description": "The total amount of the underlying token supplied in this pool normalized.",
                    "type": "number"
                },
                "suppliedUsd": {
                    "description": "The supplied amount in USD.",
                    "type": "number"
                },
                "collateralAmount": {
                    "description": "(Optional) The amount of collateral only tokens in this pool.",
                    "type": "number"
                },
                "collateralUsd": {
                    "description": "(Optional) THe amount of collateral only tokens in the pool.",
                    "type": "number"
                },
                "collateralFactor": {
                    "description": "The collateral factor of the pool (defined as a percentage, between 0-100).",
                    "type": "number"
                },
                "supplyIndex": {
                    "description": "The supply index of the pool.",
                    "type": "number"
                },
                "supplyApr": {
                    "description": "The current annual percentage rate for supplied amount.",
                    "type": "number"
                },
                "supplyIncentiveApr": {
                    "description": "The incentive annual percentage rate for supply.",
                    "type": "number"
                },
                "borrowedAmount": {
                    "description": "The amount of underlying tokens borrowed from this pool, normalized to the underlying token.",
                    "type": "number"
                },
                "borrowedUsd": {
                    "description": "The borrowed amount in USD.",
                    "type": "number"
                },
                "borrowIndex": {
                    "description": "The borrow index of the pool.",
                    "type": "number"
                },
                "borrowApr": {
                    "description": "The annual percentage rate for borrow.",
                    "type": "number"
                },
                "borrowIncentiveApr": {
                    "description": "The incentive annual percentage rate for borrow.",
                    "type": "number"
                },
                "feesUsd": {
                    "description": "TODO: is this total revenue? Or is it protocol side or supply side?",
                    "type": "number"
                },
                "incentiveAmount": {
                    "description": "TODO: what is this?",
                    "type": "number"
                },
                "incentiveUsd": {
                    "description": "TODO",
                    "type": "number"
                }
            }
        },
        {
            "tableName": "protocolSnapshot",
            "description": "Protocol level snapshot.",
            "properties": {
                "timestamp": {
                    "description": "The timestamp the snapshot was taken.",
                    "type": "string"
                },
                "protocolName": {
                    "description": "The name of the protocol this table belongs to.",
                    "type": "string"
                },
                "chainId": {
                    "description": "The standard id of the chain.",
                    "type": "number"
                },
                "tvlUsd": {
                    "description": "The total value locked in the protocol in USD. (ie, the total deposit or supplied amount).",
                    "type": "number"
                },
                "borrowAmountUsd": {
                    "description": "The total amount of tokens borrowed in USD.",
                    "type": "number"
                },
                "availableAmountUsd": {
                    "description": "The amount of tokens available to borrow in this protocol in USD.",
                    "type": "number"
                },
                "collateralUsd": {
                    "description": "(Optional) The amount of collateral only assets available in USD.",
                    "type": "number"
                },
                "feesUsd": {
                    "description": "TODO: is this total revenue? Do we want to break it up between supply / protocol revenue too?",
                    "type": "number"
                }
            }
        }
    ]
}
